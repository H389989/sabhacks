--------------------------------------------------
-- SERVICES
--------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local backpack = player:WaitForChild("Backpack")

--------------------------------------------------
-- UTIL
--------------------------------------------------
local function isDragonItem(obj)
	return obj:IsA("Tool") and string.find(obj.Name:lower(), "dragon")
end

local function giveTool(tool)
	if backpack:FindFirstChild(tool.Name) then return end

	local clone = tool:Clone()
	clone.Parent = backpack
	player.Character.Humanoid:EquipTool(clone)

	print("üêâ Gave Dragon item:", clone.Name)
end

--------------------------------------------------
-- SCAN LOCATIONS (EXPLOIT STYLE)
--------------------------------------------------
local scanSources = {
	game:GetService("ReplicatedStorage"),
	workspace,
	player.StarterGear,
}

--------------------------------------------------
-- INITIAL SCAN (INSTANT)
--------------------------------------------------
local function scanAll()
	for _, source in ipairs(scanSources) do
		for _, obj in ipairs(source:GetDescendants()) do
			if isDragonItem(obj) then
				giveTool(obj)
			end
		end
	end
end

--------------------------------------------------
-- CHARACTER READY
--------------------------------------------------
local function onCharacter(char)
	char:WaitForChild("Humanoid")
	task.wait()
	scanAll()
end

if player.Character then
	onCharacter(player.Character)
end
player.CharacterAdded:Connect(onCharacter)

--------------------------------------------------
-- LIVE SCAN (FOR NEW ITEMS)
--------------------------------------------------
for _, source in ipairs(scanSources) do
	source.DescendantAdded:Connect(function(obj)
		if isDragonItem(obj) then
			task.wait()
			giveTool(obj)
		end
	end)
end

--------------------------------------------------
-- BACKPACK PROTECTION (RE-EQUIP)
--------------------------------------------------
backpack.ChildRemoved:Connect(function(obj)
	if isDragonItem(obj) then
		task.wait()
		scanAll()
	end
end)

print("‚úÖ Dragon item scanner active")
