-- StarterPlayer > StarterPlayerScripts > LocalScript

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local equipEvent = ReplicatedStorage:WaitForChild("EquipDragon")

local function hookEquipButtons()
	for _, obj in ipairs(playerGui:GetDescendants()) do
		if obj:IsA("TextButton") and string.lower(obj.Text) == "equip" then
			if not obj:GetAttribute("Hooked") then
				obj:SetAttribute("Hooked", true)

				obj.Visible = true
				obj.Active = true
				obj.AutoButtonColor = true

				obj.MouseButton1Click:Connect(function()
					equipEvent:FireServer()
				end)
			end
		end
	end
end

hookEquipButtons()

playerGui.DescendantAdded:Connect(function()
	task.wait()
	hookEquipButtons()
end)
