-- LocalScript in StarterPlayerScripts

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- GUI CREATION
local gui = Instance.new("ScreenGui")
gui.Name = "FPSGlobalChanger"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.fromScale(0.25, 0.22)
frame.Position = UDim2.fromScale(0.375, 0.39)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.Parent = gui

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

local box = Instance.new("TextBox")
box.Size = UDim2.fromScale(0.9, 0.28)
box.Position = UDim2.fromScale(0.05, 0.2)
box.PlaceholderText = "Enter FPS"
box.Text = ""
box.TextScaled = true
box.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
box.TextColor3 = Color3.new(1,1,1)
box.Parent = frame
Instance.new("UICorner", box).CornerRadius = UDim.new(0, 8)

local btn = Instance.new("TextButton")
btn.Size = UDim2.fromScale(0.9, 0.28)
btn.Position = UDim2.fromScale(0.05, 0.58)
btn.Text = "Give FPS"
btn.TextScaled = true
btn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
btn.TextColor3 = Color3.new(1,1,1)
btn.Parent = frame
Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

-- ðŸ”¥ GLOBAL SEARCH FUNCTION
local function applyFPS(value)
	for _, inst in ipairs(game:GetDescendants()) do
		if inst:IsA("TextLabel") then
			-- Strict match for "FPS: <number>"
			local prefix = inst.Text:match("^FPS%s*:%s*")
			if prefix then
				inst.Text = prefix .. tostring(value)
			end
		end
	end
end

btn.MouseButton1Click:Connect(function()
	local fps = tonumber(box.Text)
	if not fps then
		box.Text = "Invalid"
		task.delay(1, function()
			box.Text = ""
		end)
		return
	end

	applyFPS(fps)
end)
