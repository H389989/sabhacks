--// LOCAL ADMIN GUI (Speed, Jump, Fly, Flight Speed, Noclip)
local player = game.Players.LocalPlayer
local pgui = player:WaitForChild("PlayerGui")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

--=========== CREATE GUI ===========--
local screen = Instance.new("ScreenGui")
screen.Name = "AdminUI"
screen.ResetOnSpawn = false
screen.Parent = pgui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 320, 0, 320)
frame.Position = UDim2.new(0.5, -160, 0.4, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.Visible = false
frame.Parent = screen
Instance.new("UICorner", frame)

--=========== OPEN/CLOSE BUTTON ===========--
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 120, 0, 40)
toggleButton.Position = UDim2.new(0.02, 0, 0.02, 0)
toggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
toggleButton.Text = "Open Admin"
toggleButton.TextColor3 = Color3.new(1,1,1)
toggleButton.Parent = screen
Instance.new("UICorner", toggleButton)

toggleButton.MouseButton1Click:Connect(function()
	frame.Visible = not frame.Visible
	toggleButton.Text = frame.Visible and "Close Admin" or "Open Admin"
end)

--=========== WALK SPEED INPUT ===========--
local speedBox = Instance.new("TextBox")
speedBox.Size = UDim2.new(0, 100, 0, 35)
speedBox.Position = UDim2.new(0, 20, 0, 15)
speedBox.PlaceholderText = "Speed"
speedBox.Text = ""
speedBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
speedBox.TextColor3 = Color3.new(1,1,1)
speedBox.Parent = frame
Instance.new("UICorner", speedBox)

--=========== JUMP POWER INPUT ===========--
local jumpBox = Instance.new("TextBox")
jumpBox.Size = UDim2.new(0, 100, 0, 35)
jumpBox.Position = UDim2.new(0, 140, 0, 15)
jumpBox.PlaceholderText = "JumpPower"
jumpBox.Text = ""
jumpBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
jumpBox.TextColor3 = Color3.new(1,1,1)
jumpBox.Parent = frame
Instance.new("UICorner", jumpBox)

--=========== FLIGHT SPEED INPUT ===========--
local flySpeedBox = Instance.new("TextBox")
flySpeedBox.Size = UDim2.new(0, 100, 0, 35)
flySpeedBox.Position = UDim2.new(0, 260, 0, 15)
flySpeedBox.PlaceholderText = "Fly Speed"
flySpeedBox.Text = "60"
flySpeedBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
flySpeedBox.TextColor3 = Color3.new(1,1,1)
flySpeedBox.Parent = frame
Instance.new("UICorner", flySpeedBox)

--=========== APPLY BUTTON ===========--
local applyBtn = Instance.new("TextButton")
applyBtn.Size = UDim2.new(0, 280, 0, 35)
applyBtn.Position = UDim2.new(0, 20, 0, 60)
applyBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
applyBtn.Text = "Apply Speed & Jump"
applyBtn.TextColor3 = Color3.new(1,1,1)
applyBtn.Parent = frame
Instance.new("UICorner", applyBtn)

--=========== FLY BUTTON ===========--
local flyBtn = Instance.new("TextButton")
flyBtn.Size = UDim2.new(0, 280, 0, 35)
flyBtn.Position = UDim2.new(0, 20, 0, 110)
flyBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
flyBtn.Text = "Fly: OFF"
flyBtn.TextColor3 = Color3.new(1,1,1)
flyBtn.Parent = frame
Instance.new("UICorner", flyBtn)

--=========== NOCLIP BUTTON ===========--
local noclipBtn = Instance.new("TextButton")
noclipBtn.Size = UDim2.new(0, 280, 0, 35)
noclipBtn.Position = UDim2.new(0, 20, 0, 160)
noclipBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
noclipBtn.Text = "Noclip: OFF"
noclipBtn.TextColor3 = Color3.new(1,1,1)
noclipBtn.Parent = frame
Instance.new("UICorner", noclipBtn)

--=========== FUNCTIONS ===========--
local char = player.Character or player.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

-- Speed & Jump
applyBtn.MouseButton1Click:Connect(function()
	local speed = tonumber(speedBox.Text)
	if speed then hum.WalkSpeed = speed end

	local jump = tonumber(jumpBox.Text)
	if jump then hum.JumpPower = jump end
end)

-- Fly
local flying = false
local flyVel = nil

local function startFly()
	if flyVel then flyVel:Destroy() end
	flyVel = Instance.new("BodyVelocity")
	flyVel.MaxForce = Vector3.new(1e6,1e6,1e6)
	flyVel.Velocity = Vector3.new()
	flyVel.Parent = hrp

	RunService.RenderStepped:Connect(function()
		if not flying or not flyVel then
			if flyVel then flyVel:Destroy() end
			return
		end

		local dir = Vector3.new()
		if UIS:IsKeyDown(Enum.KeyCode.W) then dir += hrp.CFrame.LookVector end
		if UIS:IsKeyDown(Enum.KeyCode.S) then dir -= hrp.CFrame.LookVector end
		if UIS:IsKeyDown(Enum.KeyCode.A) then dir -= hrp.CFrame.RightVector end
		if UIS:IsKeyDown(Enum.KeyCode.D) then dir += hrp.CFrame.RightVector end
		if UIS:IsKeyDown(Enum.KeyCode.Space) then dir += Vector3.new(0,1,0) end
		if UIS:IsKeyDown(Enum.KeyCode.LeftControl) then dir -= Vector3.new(0,1,0) end

		local flySpeed = tonumber(flySpeedBox.Text) or 60
		flyVel.Velocity = dir * flySpeed
	end)
end

flyBtn.MouseButton1Click:Connect(function()
	flying = not flying
	flyBtn.Text = flying and "Fly: ON" or "Fly: OFF"
	if flying then startFly() else if flyVel then flyVel:Destroy() end end
end)

-- Noclip
local noclip = false
noclipBtn.MouseButton1Click:Connect(function()
	noclip = not noclip
	noclipBtn.Text = noclip and "Noclip: ON" or "Noclip: OFF"
end)

-- Apply noclip every frame
RunService.Stepped:Connect(function()
	if noclip then
		for _, part in pairs(char:GetChildren()) do
			if part:IsA("BasePart") then
				part.CanCollide = false
			end
		end
	else
		for _, part in pairs(char:GetChildren()) do
			if part:IsA("BasePart") then
				part.CanCollide = true
			end
		end
	end
end)
